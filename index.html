<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            

</head>
<style>
    @import url(https://fonts.googleapis.com/css?family=Advent+Pro:300);
    body{
        font-family: 'Advent Pro', sans-serif;
        font-size: 10px;
    }



    .modal{width:75%;max-height: 100%;}
</style>
<body>
    <!-- <div class="" style="display: none;">
        <div class="row">
            <div class="col s4" style="background-color: rgba(220,220,220,0.5); padding-top: 20px; display: none;">
                <ul id="settings-tab" class="tabs tabs-fixed-width tab-demo z-depth-1">
                    <li class="tab"><a href="#test0">Feature View</a></li>
                    <li class="tab"><a href="#test1">Setup View</a></li><br>
                </ul>
                <div id="test1" class="col s12">
                    <div class="row" style="margin: 20px;">
                    <div class="col s2"></div>
                    <div class="col s4"><a class="waves-effect waves-light btn" id="save-preset"><i class="material-icons left" style="margin: 0;">save</i>&nbsp;save preset</a></div>
                    <div class="col s4">
                        <a class="waves-effect waves-light btn" id="load-preset"><i class="material-icons left" style="margin: 0;">upload</i>&nbsp;load preset</a>
                        <input type="file" id="load-preset-file" style="display: none;">
                    </div>
                    

                    </div>
                    
                    <div class="row">
                        <div class="col s3">
                        <ul id="gene-list-sidebar" class="collection with-header">
                        </ul>                               
                            <div class="row">
                            <div class="input-field col s10">
                                <input id="new-gene-inp" type="text" placeholder="New Gene..." class="validate">
                                </div>
                            <div class="col s2" style="margin-top: 20px;">
                                <i class="material-icons" style="font-size: 30px; cursor: pointer;" onclick="addNewGene(document.getElementById('new-gene-inp').value)">add_circle_outline</i>
                            </div>
                        </div>
                        </div>
                        <div class="col s9" id="gene-props-sidebar" >
                        </div>
                        <br><br><br>
                        
                    </div>
                    
                                    
                </div>
                <div id="test0" class="col s12"><p>

                    <a class="waves-effect waves-light btn modal-trigger" href="#gene-modal">Create your world</a>

                    
                </p></div>

                <div class="row" id="summary-div">
                    <canvas id="summary-chart" style="background-color: rgb(250,250,250);"  width="200" height="80"></canvas>

                </div>
                <div class="row">
                    <div class="col s5"><a class="waves-effect waves-light btn" onclick="W.setupNewSim()">setup world</a><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
                    <div class="col s7">
                        <div class="col s4"><a class="waves-effect waves-light btn" onclick="W.showDayProgress()">sim 1 day</a></div>
                        <div class="col s4"><a class="waves-effect waves-light btn" onclick="W.startNewSim(20,1)">sim 20 days</a></div>
                        <div class="col s4"><a class="waves-effect waves-light btn" onclick="W.startNewSim(100,1)">sim 100 days</a></div>
                    </div>
                    
                </div>

            </div>
            
            <div class="col s8" id="top-section-div">
                <div class="row">
                    <div style="display: none;" class="col s2"></div>
                    <div style="display: none;" class="col s3" id="prop-bars">
                    <canvas id="chart2"></canvas>

                    </div>
                </div>
                <div class="row" id="bottom-section" style="margin-top: 10%; display: none;">
                    <canvas id="chart1" width="250" height="50"></canvas>
                </div>
            </div>
        </div>
        
    </div> -->
    
    
    <div id="site-main" class="row" style="border: 1px;">
        <div id="left-info-bar">
            <!-- <div class="row">
                <div class="col s12">
                  <ul class="tabs">
                    <li class="tab col s3 info-gene-tab"><a href="#test11">Speedy</a></li>
                  </ul>
                </div>
                <div id="test11" class="col s12">
                    Average speed: X<br>
                    Average stamina: Y<br>
                    ...
                </div>
            </div> -->


            <h4>Census</h4>
            <div class="row" id="pop-line-container">
                <canvas id="pop-line" width="100"></canvas>
            </div>
            <h4>Dominant Sub-species</h4>
            <!-- <hr> -->
            <div class="row" id="fittest-blobs-container">
                <div id="fittest-1" class="col xl4 l12 fittest-container">
                    
                </div>

                <div id="fittest-2" class="col xl4 l12 fittest-container">
                    
                </div>

                <div id="fittest-3" class="col xl4 l12 fittest-container">
                    
                </div>

            </div>

            <h4>Trait Trend</h4>
            <div class="row" id="prop-bars-container">

            </div>
        </div>
        
        <div class="" style="float: right; overflow: hidden;">
            <div id="top-options-bar" class="options-bar">
                
                <div class="bar-btn cent fl" id="draw-world-btn">
                    <i class="material-icons bar-icon">draw</i>
                </div>
                <div class="bar-btn cent fl" id="fill-world-btn">
                    <i class="material-icons bar-icon">format_color_fill</i>
                </div>

                <div class="bar-group-hor" id="terrain-img-icons" style="display: none;">
                    
                </div>

                <div class="bar-btn cent fl" id="done-edit-world-btn">
                    <i class="material-icons bar-icon">done</i>
                </div>
            </div>


            <canvas id="world"></canvas>

        </div>
        <div id="mid-options-bar" class="options-bar" style="float: right; overflow:hidden;">

            <div class="bar-btn cent circled-icon">
                <i class="material-icons bar-icon">settings</i>
            </div>
            <div class="">
                <div class="bar-btn cent" id="play-day-btn">
                    <i class="material-icons bar-icon">play_arrow</i>
                </div>
                <div class="bar-group-vert">
                    <div class="bar-btn cent" id="sim-days-1-btn">
                        <div class="bar-text">SIM 1</div>
                    </div>
                    <div class="bar-btn cent" id="sim-days-20-btn">
                        <div class="bar-text">SIM 20</div>
                    </div>
                    <div class="bar-btn cent" id="sim-days-100-btn">
                        <div class="bar-text">SIM 100</div>
                    </div>
                    
                </div>
                <div class="bar-btn cent">
                    <i class="material-icons bar-icon">show_chart</i>
                </div>
            </div>
            
            
            
            <div class="bar-bot">
                <div class="bar-btn cent circled-icon" id="edit-genes-btn">
                    <i class="material-icons bar-icon">edit</i>
                </div>
                <div id="mid-bar-genes" class="bar-group-vert">
                    
                </div>
                <div class="bar-btn cent" id="save-genes-btn">
                    <i class="material-icons bar-icon">save</i>
                </div>
                <div class="bar-btn cent" id="load-genes-btn">
                    <i class="material-icons bar-icon">upload</i>
                </div>
            </div>
        </div>
    </div>

    <div id="gene-modal" class="modal">
        <div class="modal-content">
        <h4>&nbsp;Your population <div style="float:left;margin-top: 5px;"><span onclick="createNewGene()"><i class="material-icons" style="font-size: 30px;cursor: pointer;">add_box</i></span></div></h4>
        <div class="row">
            <div class="col s10" style="display: flex; justify-content: center;">
                <div id="modal-imgs" style="float: left;">
                    
                </div>
            </div>
            <div class="col s2">
                <canvas id="gene-pop-pie" ></canvas>
                <br>
            </div>
        </div>
            
            <hr>
            <div id="modal-stats-div" class="row">
                
            </div>
            <hr>
        </div>
        <div id="gene-info-div" class="row gene-info">
            
        </div>

        <div class="modal-footer">
        <a href="#!" onclick="formatWorldGenes(tempGeneData);" class="modal-close waves-effect waves-green btn-flat">Start World</a>
        </div>
    </div>

    <div id="terrain-imgs">
        <img id="terrain-grass" src="media/terrains/grass.jpeg" width="50" height="50" hidden>
        <img id="terrain-stone" src="media/terrains/stone.webp" width="50" height="50" hidden>
        <img id="terrain-wall" src="media/terrains/wall.jpeg" width="50" height="50" hidden>
    </div>
    
</body>
<script src="helper.js"></script>
<script src="paint.js"></script>
<script src="sim.js"></script>
<script src="layout.js"></script>
<script src="graphs.js"></script>
<!-- <script src="combined.js"></script> -->
</html>


<style>

    .bord{
        border: 1px solid;
    }
    
    .range-field{
        margin: 0;
    }
    
    .row{
        margin: 0;
    }
    .stats-col{
        height: 150px;
        /* display: flex;
        justify-content: center; */
    }
    .stats-col-inner{
        font-size: 17px;
        margin-top: 10%;
    }
    .modal{
        font-size: 25px;
    }
    .input-circle{
        margin-left: -10px;
        font-size: 25px;
        /* color: rgba(255,80,0,0.4); */
        cursor:pointer;
    }
    .input-circles{
        margin-right: -40px;
    }
    .gene-info{
        font-size: 20px;
        /* margin-left: 3%; */
        /* padding-right: 10%; */
    }
    .cent{
        display: flex;
        justify-content: center;
        text-align: center;
    }
    .color-choice{
        font-size: 60px;
        margin-left: -10px;
        /* color:grey; */
        cursor: pointer;
    }
    .square {
      height: 30px;
      width: 30px;
      /* background-color: #555; */
      border: 3px solid grey;
      margin: 5px;
      cursor: pointer;
    }
    
    #left-info-bar{
        border: 2px solid;
        float: left;
        overflow: auto;
    }

    .info-gene-tab{
        height: 100%;
        margin: auto;
    }
    

    .gene-info-icon{
        padding-top: 20%;
    }

    .prop-icon{
        margin-right:6%;
        /* padding-left: 5%; */
    }

    #fittest-1{
        background-color: rgba(220, 192, 68, 0.5);
    }
    #fittest-2{
        background-color: rgba(161, 161, 161, 0.5);
    }
    #fittest-3{
        background-color: rgba(138, 89, 51, 0.5);
    }

    .fittest-blobs{
        margin: 0 auto;
        /* margin: 0; */
    }
    .fit-blob-props{
        text-align: center;
        font-size: 16px;
        font-weight: bold;
    }

    .prop-category-icons{
        width: 28%;
        margin-left: 4%;
        float: left;
    }

    .category-icons{
        /* margin: 0; */
        width: 100%;
        /* position: relative; */
        margin-top: 10%;
    }

    .cat-icon-img{
        width: 35%;
        float: left;
        /* margin: 0; */
    }

    .cat-icon-value{
        width: 65%;
        float: left;
        /* margin: 0; */
    }

    .fittest-pop{
        font-size: 25px;
    }

    .prop-bar{
        height: 100px;
    }

    .options-bar{
        margin: 0;
        background-color: rgb(133, 133, 133);
    }

    .bar-btn{
        width: 60px;
        height: 60px;
        background-color: rgba(160,160,160,0);
        color: rgb(59, 58, 58);
        cursor: pointer;
    }

    .fl{
        float: left;
    }

    .bar-btn:hover{
        background-color: rgba(160,160,160,0.4);
    }

    .bar-group-vert-main{
        border-top: 1px solid;
        border-bottom: 1px solid;
        border-color: rgb(192, 192, 192);
    }
    .bar-group-vert{
        border-top: 1px solid;
        border-bottom: 1px solid;
        border-color: rgb(152, 152, 152);
    }

    .bar-bot{
        position: absolute;
        bottom: 0;
    }
    .bar-right{
        position: absolute;
        right: 0;
    }

    .bar-icon{
        font-size: 32px;
        margin: auto;
    }
    
    .circled-icon{
        background-color: rgba(160,160,160,0.8);
    }
    .circled-icon:hover{
        background-color: rgba(160,160,160,0.8);
    }

    .selected-icon{
        background-color: rgba(160,160,160,0.6);
    }
    .selected-icon:hover{
        background-color: rgba(160,160,160,0.6);
    }

    .bar-img{
        margin: auto;
        width: 30px;
        height: 30px;
    }
    .selected-bar-img{
        margin: auto;
        width: 35px;
        height: 35px;
    }

    .bar-text{
        font-family: 'Montserrat', sans-serif;
        font-size: 13px;
        margin: auto;
    }


    .terrain-icon{
        border: 3px solid rgb(59,58,58);
        border-radius: 3px;
    }
    
    </style>


<script>

M.AutoInit()
var modal = M.Modal.getInstance(document.getElementById('gene-modal'))
// var modal = M.Modal.init(document.getElementById('gene-modal'), {});
modal.open()
createNewGene()
// M.Tooltip.init(document.querySelectorAll('.tooltipped'),{})
// M.Tabs.init(document.querySelectorAll('.tabs'),{})
// var instance = M.Tabs.init(document.getElementById('settings-tab'), {});

for(let icon of document.getElementsByClassName('info-gene-tab')){
    icon.style.height = '100%';
}

</script>